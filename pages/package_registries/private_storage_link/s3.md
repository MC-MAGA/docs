# Private Storage Link – AWS S3

> **Audience** — Buildkite organization administrators.

This page guides you through connecting an **Amazon S3** bucket to Buildkite Package Registries. The steps are unchanged from the original S3 documentation; they have simply moved here to sit alongside other providers.

<%# BEGIN: copied from original private_storage.md (minor wording tweaks only) %>

By default, Buildkite Package Registries provides its own storage (called *Buildkite-hosted storage*). Linking your own S3 bucket lets you:

- Keep packages close to your geographical region for faster downloads.
- Avoid cross-cloud egress costs.
- Retain full sovereignty over the binary data while Buildkite continues to manage metadata and indexing.

Buildkite uses [AWS CloudFormation](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html) to provision the required IAM permissions inside your AWS account.

## Before you start

1. Create (or locate) an empty S3 bucket.
2. Review [Security best practices for Amazon S3](https://docs.aws.amazon.com/AmazonS3/latest/userguide/security-best-practices.html).

## Link your S3 bucket

1. **Organization Settings > Packages > Private Storage Link > Add private storage link**.
1. Choose **Amazon S3** and enter the bucket _Region_ and _Bucket name_.
1. Click **Launch Stack** to open the pre-populated CloudFormation template and follow the AWS UI to create the stack.
1. Back in Buildkite, click **Run diagnostic**. The test checks:
   * `PUT` — publish
   * `GET` — download
   * `PUT` — tag
   * `DELETE` — delete
1. When all tests pass, click **Create Private Storage Link**.

## Set as default storage (optional)

Once at least one PSL exists you can change the organization’s default storage (this affects newly-created registries):

1. **Organization Settings > Packages > Private Storage Link**.
1. Click **Change** and select the `s3://…` link.

## Deleting packages

Buildkite does **not** delete the objects. Instead it applies an S3 object tag:

| Key | Value |
| --- | ----- |
| `buildkite:deleted` | UTC timestamp |

Use [Lifecycle Rules](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html) to expire tagged objects.

<%# END copied content %>
